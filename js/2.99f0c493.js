(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"149f":function(e,t,n){"use strict";n("0481"),n("fb6a"),n("4069"),n("ddb0");var a=n("e0a5"),r=[],s=[],i=[],o=0,c=[];const l=(e,t)=>(n,a)=>(c.push({index:a,error:e,severity:t||"error"}),e),d=(e,t)=>t.from?t.from:t.back?e.index-t.back:e.index-t,u=(e,t,n)=>Object(a["u"])(a=>l(e,t)("",d(a,n))),b=Object(a["u"])(e=>o=e.index).map(e=>o),p=e=>t=>({type:e,value:t}),m=e=>e[e.length-1],f=Object(a["k"])(Object(a["p"])(/^./)),h=Object(a["r"])([Object(a["s"])("//"),Object(a["i"])(Object(a["c"])("\n")),a["n"]]),g=Object(a["r"])([Object(a["s"])("/*"),Object(a["i"])(Object(a["s"])("*/")),Object(a["s"])("*/")]),j=Object(a["l"])(Object(a["d"])([a["v"],h,g])).map(e=>e||""),y=e=>Object(a["b"])(j)(j)(e),v=Object(a["q"])(y(Object(a["c"])(","))),O=(Object(a["q"])(y(Object(a["c"])(";"))),Object(a["b"])(y(Object(a["c"])("(")))(y(Object(a["c"])(")")))),w=Object(a["b"])(y(Object(a["c"])("{")))(y(Object(a["c"])("}"))),E=Object(a["b"])(y(Object(a["c"])("[")))(y(Object(a["c"])("]"))),k=Object(a["p"])(/^[0-1]/).map(e=>parseInt(e)),x=["module","begin","input","output","wire","assign","endmodule","buffer","and","not","or","xor","nor","nand"],C=Object(a["e"])((function*(){const e=yield Object(a["g"])(y(Object(a["r"])([Object(a["p"])(/^[a-zA-Z_]/),Object(a["o"])(Object(a["p"])(/^[a-zA-Z0-9_]+/)).map(e=>null===e?"":e)])).map(e=>e.join("")));return e.isError&&(yield Object(a["j"])("Invalid ID")),x.some(t=>t==e.value)&&(yield Object(a["j"])("Identifier cannot be keyword")),e.value})),F=(Object(a["e"])((function*(){const e=yield a["f"];yield Object(a["s"])("'");const t=yield Object(a["s"])("b"),n=yield a["f"];return{type:"number",bits:e,base:t,value:n}})),Object(a["e"])((function*(){const e=yield C;return r.some(t=>t==e)||(yield Object(a["u"])(t=>l("Undefined variable","warning")("",t.index-e.length))),e}))),_=e=>t=>(console.log(e+":",t),t),T=Object(a["e"])((function*(){const e=yield C.errorMap(l("Invalid identifier"));return s.some(t=>t==e)||(yield Object(a["u"])(t=>l("Must be control variable","warning")("",t.index-e.length))),e})),A=Object(a["e"])((function*(){const e=yield F,t=yield Object(a["o"])(E(a["f"]));return{id:e,index:t}})),q=Object(a["e"])((function*(){const e=yield Object(a["r"])([Object(a["s"])("."),C]).map(e=>e[1]),t=yield O(A);return{param:e,mapped:t}})),I=Object(a["e"])((function*(){yield a["n"];const e=yield b,t=yield y(C).errorMap(e=>"no module"),n=yield y(C).errorMap(e=>"no id"),r=yield O(v(y(q)));yield Object(a["s"])(";");const s=i.find(e=>e==t);return s||(yield u("Module "+t+" not defined","warning",{from:e})),{type:"instance",module:t,id:n,params:r}})),S=Object(a["e"])((function*(){const e=yield Object(a["d"])([Object(a["s"])("and"),Object(a["s"])("nand"),Object(a["s"])("or"),Object(a["s"])("xor"),Object(a["s"])("nor"),Object(a["s"])("not"),Object(a["s"])("control"),Object(a["s"])("buffer")]),t=yield O(v(F));return yield y(Object(a["s"])(";")),{type:"gate",id:t[0],gate:e,params:t.slice(1)}})),R=Object(a["d"])([Object(a["c"])("&").map(e=>({type:"OP_AND",value:"and"})),Object(a["c"])("|").map(e=>({type:"OP_OR",value:"or"})),Object(a["c"])("^").map(e=>({type:"OP_XOR",value:"xor"})),Object(a["s"])("~&").map(e=>({type:"OP_NAND",value:"nand"})),Object(a["s"])("~|").map(e=>({type:"OP_NOR",value:"nor"}))]),P=Object(a["r"])([Object(a["o"])(Object(a["c"])("~")),F]).map(([e,t])=>({type:"VARIABLE",value:t,invert:null!=e})),N=e=>{const t=p("BRACKETED_EXPRESSION");return t(e.map(e=>Array.isArray(e)?N(e):e))},B=Object(a["e"])((function*(){const e={OPEN_BRACKET:0,OPERATOR_OR_CLOSING_BRACKET:1,ELEMENT_OR_OPENING_BRACKET:2,CLOSE_BRACKET:3};let t=e.ELEMENT_OR_OPENING_BRACKET;const n=[],r=[n];yield Object(a["c"])("(");while(1){const s=yield f;if(t===e.OPEN_BRACKET)yield Object(a["c"])("("),n.push([]),r.push(m(n)),yield a["n"],t=e.ELEMENT_OR_OPENING_BRACKET;else if(t===e.CLOSE_BRACKET){if(yield Object(a["c"])(")"),r.pop(),0===r.length)break;yield a["n"],t=e.OPERATOR_OR_CLOSING_BRACKET}else if(t===e.ELEMENT_OR_OPENING_BRACKET)")"===s&&(yield Object(a["j"])("Unexpected end of expression")),"("===s?t=e.OPEN_BRACKET:(m(r).push(yield P),yield a["n"],t=e.OPERATOR_OR_CLOSING_BRACKET);else{if(t!==e.OPERATOR_OR_CLOSING_BRACKET)throw new Error("Unknown state");if(")"===s){t=e.CLOSE_BRACKET;continue}m(r).push(yield R),yield a["n"],t=e.ELEMENT_OR_OPENING_BRACKET}}return N(n)})),M=Object(a["e"])((function*(){yield a["n"];const e={EXPECT_ELEMENT:0,EXPECT_OPERATOR:1},t=[];let n=e.EXPECT_ELEMENT;while(1)if(n===e.EXPECT_ELEMENT){const r=yield Object(a["d"])([B,P]);t.push(r),n=e.EXPECT_OPERATOR,yield a["n"]}else if(n===e.EXPECT_OPERATOR){const r=yield f;if(";"===r){yield Object(a["c"])(";"),yield a["n"];break}const s=yield R;t.push(s),n=e.EXPECT_ELEMENT,yield a["n"]}return p("ASSIGN_EXPRESSION")(t)})),D=Object(a["e"])((function*(){yield Object(a["s"])("assign ");const e=yield y(C).errorMap(l("Invalid assign identifier"));yield y(Object(a["s"])("="));const t=yield M.errorMap(l("Invalid expression"));return{type:"assign",id:e,value:t}})),G=Object(a["e"])((function*(){const e=yield E(Object(a["r"])([a["f"],Object(a["s"])(":"),a["f"]])).map(e=>[e[0],e[2]]);return e})),L=Object(a["r"])([y(C),Object(a["l"])(Object(a["t"])(Object(a["s"])(","))(y(C)))]).map(e=>e.flat()).errorMap(l("Invalid port identifier")),z=Object(a["e"])((function*(){const e=yield Object(a["d"])([y(Object(a["s"])("input")),y(Object(a["s"])("output"))]).errorMap(l("Invalid port type: must be 'input' or 'output'")),t=yield Object(a["o"])(G),n=yield L.errorMap(_("Invalid port identifier33333"));return n.map(n=>({type:e,dim:t,id:n}))})),W=Object(a["e"])((function*(){yield Object(a["s"])("wire ");const e=yield v(y(C).errorMap(l("Invalid wire identifier")));return yield y(Object(a["s"])(";")),e})),Q=Object(a["e"])((function*(){yield Object(a["s"])("module ").errorMap(l("Expecting 'module'"));const e=yield y(C).errorMap(l("Invalid module identifier")),t=yield Object(a["o"])(O(v(z.errorMap(l("Invalid ports section")))).map(e=>e.flat()));yield y(Object(a["s"])(";"));var n=yield Object(a["o"])(y(W));n=n||[],r=[...t.map(e=>e.id),...n],s=[];const o=yield Object(a["l"])(Object(a["d"])([y(S),y(I),y(D)]));var c;o.forEach(e=>{"control"==e.gate&&s.push(e.id)}),"main"==e&&(c=yield X.errorMap(l("Invalid test block"))),yield y(Object(a["s"])("endmodule"));var d={type:"module",id:e,ports:t.flat(),wires:n,statements:o};return c&&(d.clock=c),i.push(e),d})),$=Object(a["e"])((function*(){const e=yield y(T);yield Object(a["s"])("=");const t=yield Object(a["r"])([y(k),Object(a["k"])(Object(a["a"])(k))]).map(e=>e[0]).errorMap(l("Expected 0 or 1"));return{id:e,value:parseInt(t,10)}})),K=Object(a["e"])((function*(){yield Object(a["s"])("#");const e=yield a["f"].errorMap(l("Invalid time"));yield a["n"];var t=yield Object(a["o"])(w(v(y($))));return t=t||[],yield Object(a["s"])(";"),{time:parseInt(e,10),assignments:t}})),X=Object(a["e"])((function*(){yield y(Object(a["s"])("test begin"));const e=yield Object(a["l"])(y(K));return yield y(Object(a["s"])("end")),e})),H=e=>{c=[];const t=Object(a["r"])([Object(a["m"])(y(Q)),a["h"]]).map(e=>e[0]).run(e);return{parseState:t,lint:c}};t["a"]=H},"1f8d":function(e,t,n){},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=s(e);return n(t)}function s(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id="4678"},8041:function(e,t,n){"use strict";var a=n("cb9a"),r=n.n(a);r.a},"8b24":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"doc"},[n("div",{staticClass:"q-pa-md row items-start q-gutter-md justify-center"},[n("div",{staticClass:"col"},[n("q-tabs",{attrs:{"inline-label":""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab",{attrs:{name:"code",label:"Code"}}),n("q-tab",{attrs:{name:"gates",label:"Gates",disable:!e.compiled.gates.length}}),n("q-tab",{attrs:{name:"trace",label:"Trace",disable:!e.compiled.simulation}}),n("q-tab",{attrs:{name:"graph",label:"Schematic",disable:!e.compiled.gates.length}})],1),n("q-tab-panels",{attrs:{"keep-alive":"",dense:"",animated:"","transition-prev":"fade","transition-next":"fade"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("q-tab-panel",{key:"code",staticClass:"q-gutter-md",attrs:{name:"code"}},[n("div",{staticClass:"row"},[n("q-card",{staticClass:"col"},[n("q-toolbar",{staticClass:"bg-grey-4 filetabs"},[e._l(e.openFiles,(function(t){return n("q-tabs",{key:t,attrs:{shrink:"",stretch:"",dense:"","inline-label":"",align:"left","no-caps":"","active-color":"white","active-bg-color":"grey-9","indicator-color":"cyan"},model:{value:e.sourceTab,callback:function(t){e.sourceTab=t},expression:"sourceTab"}},[n("q-tab",{staticClass:"filetab",attrs:{name:t,label:t,dense:""}})],1)})),n("q-space"),n("div",{staticClass:"q-gutter-sm"},[e.sourceErrors(e.sourceTab)>0?n("q-badge",{attrs:{color:"red"}},[e._v(e._s(e.sourceErrors(e.sourceTab))+"\n                    "),n("q-icon",{staticClass:"q-ml-xs",attrs:{name:"warning",color:"white"}})],1):e._e(),n("q-btn-dropdown",{attrs:{dense:"",label:"Files"}},e._l(e.allFiles,(function(t){return n("q-list",{key:t},[n("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(n){return e.onOpenFile(t)}}},[n("q-item-section",[n("q-item-label",[e._v(e._s(t))])],1)],1)],1)})),1),n("q-btn",{staticClass:"all-pointer-events z-top",attrs:{size:"xs",flat:"",round:"",icon:"close"},on:{click:e.closeFile}})],1)],2),e._l(e.openFiles,(function(t){return n("q-tab-panels",{key:t,attrs:{"keep-alive":""},model:{value:e.sourceTab,callback:function(t){e.sourceTab=t},expression:"sourceTab"}},[n("q-tab-panel",{key:t,staticClass:"q-pa-none",attrs:{name:t}},[n("editor",{on:{parsed:function(n){return e.onParsed(t,n)}},model:{value:e.source[t],callback:function(n){e.$set(e.source,t,n)},expression:"source[file]"}})],1)],1)}))],2)],1),n("div",{staticClass:"row"},[n("q-card",{staticClass:"col"},[n("q-card-section",[n("div",{staticClass:"row q-gutter-md q-pb-md"},[n("q-btn",{attrs:{color:"primary","icon-right":e.compileIcon,label:"Compile",disable:e.sourceErrors(e.sourceTab)>0},on:{click:e.compile}}),n("q-btn",{attrs:{color:"secondary","icon-right":"play_arrow",label:"Simulate",disable:"success"!=e.compiled.state},on:{click:e.simulate}}),n("q-space")],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showTerminal,expression:"showTerminal"}],staticClass:"row q-pa-sm",staticStyle:{"background-color":"black"}},[n("div",{staticClass:"col",staticStyle:{height:"20vh"},attrs:{id:"terminal"}})])])],1)],1)]),n("q-tab-panel",{key:"trace",attrs:{name:"trace"}},[n("trace",{attrs:{file:e.compiled.sourceFile,simulation:e.compiled.simulation,gates:e.compiled.gates,instances:e.compiled.instances}})],1),n("q-tab-panel",{key:"gates",attrs:{name:"gates"}},[n("gates",{attrs:{file:e.compiled.sourceFile,gates:e.compiled.gates,instances:e.compiled.instances}})],1),n("q-tab-panel",{key:"graph",attrs:{name:"graph"}},[n("graph",{attrs:{file:e.compiled.sourceFile,gates:e.compiled.gates,instances:e.compiled.instances}})],1)],1)],1)])])},r=[],s=(n("fb6a"),n("a434"),n("4d90"),n("ddb0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("codemirror",{ref:"cmEditor",attrs:{value:e.value,options:e.cmOptions},on:{ready:e.onReady,input:e.onChange}})}),i=[],o=n("bad6"),c=o["a"],l=(n("a796"),n("2877")),d=Object(l["a"])(c,s,i,!1,null,null,null),u=d.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-pa-md q-gutter-md"},[n("q-card",[n("q-card-section",[n("q-btn",{attrs:{label:"Redraw"},on:{click:e.redraw}}),n("q-radio",{attrs:{val:"force",label:"Force"},model:{value:e.layout,callback:function(t){e.layout=t},expression:"layout"}}),n("q-radio",{attrs:{val:"dagre",label:"Dagre"},model:{value:e.layout,callback:function(t){e.layout=t},expression:"layout"}}),"force"==e.layout?n("q-slider",{attrs:{min:10,max:300,step:25},model:{value:e.linkDistance,callback:function(t){e.linkDistance=t},expression:"linkDistance"}}):e._e(),n("q-checkbox",{attrs:{label:"Node Labels"},model:{value:e.showNodeLabels,callback:function(t){e.showNodeLabels=t},expression:"showNodeLabels"}})],1),n("q-separator"),n("q-card-section",[n("div",{ref:"graph"})])],1)],1)},p=[],m=(n("e01a"),n("0481"),n("baa5"),n("4069"),n("30d1")),f=n.n(m);f.a.registerEdge("can-running",{setState(e,t,n){const a=n.get("keyShape");if("running"===e)if(t){let e=0;a.animate(()=>{e++,e>9&&(e=0);const t={lineDash:[4,2,1,2],lineDashOffset:-e};return t},{repeat:!0,duration:3e3})}else a.stopAnimate(),a.attr("lineDash",null)}},"cubic-horizontal");var h={props:["gates","instances"],data(){return{graph:null,layout:"dagre",showNodeLabels:!1,linkDistance:150}},watch:{graphData:function(e){console.log("graphData Watch"),this.graph.data(e),this.graph.render()},graphConfig:function(e){console.log("graphConfig Watch"),this.graph.updateLayout(e.layout)}},methods:{redraw:function(){console.log("redraw"),this.graph.data(this.graphData),this.graph.render()}},computed:{graphConfig:function(){return"force"==this.layout?{layout:{type:"force",preventOverlap:!0,linkDistance:this.linkDistance}}:"dagre"==this.layout?{layout:{type:"dagre",rankdir:"LR",align:"DL",controlPoints:!0,nodesepFunc:()=>1,ranksepFunc:()=>1}}:{layout:{type:"force"}}},graphData:function(){if(this.gates){const e={nodes:this.gates.map(e=>({id:e.id,label:this.showNodeLabels?e.id.substring(e.id.lastIndexOf(".")+1):null,description:e.id,type:"circle",icon:{show:!0,img:e.logic+".svg"},comboId:e.instance})),edges:this.gates.map(e=>e.inputs?e.inputs.map(t=>({source:t,target:e.id})):null).flat().filter(e=>e),combos:this.instances.map(e=>{const t=e.id.substring(0,e.id.lastIndexOf(".")),n=e.id.split(".").length-1,a={id:e.id,label:e.id.substring(e.id.lastIndexOf(".")+1),style:{fillOpacity:.3*n}};return""!=t&&(a.parentId=t),a})};return console.log("graphData Computed: ",e),e}return{}}},mounted(){this.graph=new f.a.Graph({container:this.$refs.graph,width:700,height:600,groupByTypes:!1,fitView:!0,fitViewPadding:20,layout:this.graphConfig.layout,defaultNode:{type:"circle",size:30,style:{},linkPoints:{top:!1,bottom:!1,left:!1,right:!0,fill:"#fff",size:5},anchorPoints:[[0,.25],[0,.75],[0,.5],[1,.25],[1,.75],[1,.5]],sourceAnchor:3,targetAnchor:0,labelCfg:{style:{fill:"#1890ff",fontSize:6},position:"bottom"}},defaultEdge:{type:"can-running",style:{endArrow:{path:f.a.Arrow.triangle(3,3),d:0},startArrow:!1,stroke:"#999"}},defaultCombo:{type:"rect",anchorPoints:[[0,.25],[0,.75],[0,.5],[1,.5]],sourceAnchor:3,targetAnchor:0},nodeStateStyles:{active:{opacity:1},inactive:{opacity:.4}},edgeStateStyles:{active:{stroke:"#F6BD16",lineWidth:3,opacity:1},inactive:{opacity:.4,stroke:"#999",lineWidth:1}},modes:{default:["drag-node","drag-canvas","drag-combo","collapse-expand-combo","zoom-canvas",{type:"tooltip",formatText:function(e){const t=e.description;return t},offset:30}]}}),this.graph.on("node:mouseenter",e=>{var t=this.graph.getEdges();t.forEach(e=>{e.update({style:{opacity:.3}})});const n=e.item;t=n.getEdges(),t.forEach(e=>{e.update({style:{opacity:1,lineWidth:2,endArrow:{path:f.a.Arrow.triangle(0,0,0),d:0}}}),this.graph.setItemState(e,"running",!0)})}),this.graph.on("node:mouseleave",e=>{var t=this.graph.getEdges();t.forEach(e=>{e.update({style:{opacity:1,lineWidth:1,endArrow:{path:f.a.Arrow.triangle(4,4,0),d:0}}})});const n=e.item;t=n.getEdges(),t.forEach(e=>this.graph.setItemState(e,"running",!1))})}},g=h,j=(n("eb33"),n("f09f")),y=n("a370"),v=n("9c40"),O=n("3786"),w=n("c1d0"),E=n("8f8e"),k=n("eb85"),x=n("eebe"),C=n.n(x),F=Object(l["a"])(g,b,p,!1,null,null,null),_=F.exports;C()(F,"components",{QCard:j["a"],QCardSection:y["a"],QBtn:v["a"],QRadio:O["a"],QSlider:w["a"],QCheckbox:E["a"],QSeparator:k["a"]});var T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-pa-sm q-gutter-sm"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-3"},[n("div",{staticClass:"text-subtitle2"},[e._v(e._s(e.file))]),n("q-tree",{attrs:{nodes:e.instanceTree,"node-key":"id","selected-color":"primary",selected:e.instanceID,"default-expand-all":""},on:{"update:selected":function(t){e.instanceID=t}}})],1),n("div",{staticClass:"col-9 q-gutter-md"},[n("div",{staticClass:"row"},[n("q-radio",{attrs:{val:"all",label:"All"},model:{value:e.showWhichGates,callback:function(t){e.showWhichGates=t},expression:"showWhichGates"}}),n("q-radio",{attrs:{val:"inputs",label:"Inputs"},model:{value:e.showWhichGates,callback:function(t){e.showWhichGates=t},expression:"showWhichGates"}}),n("q-radio",{attrs:{val:"outputs",label:"Outputs"},model:{value:e.showWhichGates,callback:function(t){e.showWhichGates=t},expression:"showWhichGates"}})],1),e.selectedInstance?n("div",[n("q-scroll-area",{staticStyle:{height:"70vh"}},e._l(e.selectedGates,(function(t){return n("div",{key:t.globalid,staticClass:"row"},[n("div",{staticClass:"col-9"},[n("trace-chart",{attrs:{"chart-data":e.tracedata(t.globalid),options:e.traceoptions}})],1),n("div",{staticClass:"col-3"},[n("div",{staticClass:"text-caption"},[e._v(e._s(t.instanceid))])])])})),0)],1):e._e()])])])},A=[],q=n("ded3"),I=n.n(q),S=n("1fca");const{reactiveProp:R}=S["b"];var P={extends:S["a"],mixins:[R],props:{options:{type:Object,default:null},height:{type:String,default:"60px"}},mounted(){this.renderChart(this.chartData,this.options)}},N={data:function(){return{instanceID:"main",showWhichGates:"all"}},computed:{selectedInstance:function(){return this.getInstance(this.instanceID)},instanceTree:function(){const e=t=>{const n=this.instances.find(e=>e.id==t);return{label:n.id.slice(n.id.lastIndexOf(".")+1),id:n.id,children:n.instances.map(t=>e(t))}};return[e("main")]},selectedGates:function(){var e=this.selectedInstance;switch(this.showWhichGates){case"all":return[...e.inputs,...e.wires,...e.outputs];case"wires":return[...e.wires];case"outputs":return[...e.outputs];case"inputs":return[...e.inputs]}return[]}},methods:{getGate:function(e){return this.gates.find(t=>t.id==e)},getInstance:function(e){return this.instances.find(t=>t.id==e)}}},B={props:["simulation","gates","instances","file"],mixins:[N],components:{TraceChart:P},data(){return{}},methods:{tracedata:function(e){return{labels:this.simulation.time,datasets:[I()(I()({},this.traceColor(e)),{},{label:e,data:this.simulation[e],steppedLine:!0,pointRadius:0})]}},traceColor:function(e){return this.selectedInstance.outputs.some(t=>t.globalid==e)?{backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)"}:this.selectedInstance.inputs.some(t=>t.globalid==e)?{backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)"}:void 0}},computed:{clockData:function(){return{labels:this.simulation.time,datasets:[{label:"clock",data:this.simulation.clock,steppedLine:!0,pointRadius:0}]}},traceoptions:function(){return{legend:{display:!1},scales:{yAxes:[{ticks:{stepSize:1}}]}}}}},M=B,D=n("7f41"),G=n("4983"),L=Object(l["a"])(M,T,A,!1,null,null,null),z=L.exports;C()(L,"components",{QTree:D["a"],QRadio:O["a"],QScrollArea:G["a"]});var W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"q-pa-md q-gutter-md"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-3"},[n("div",{staticClass:"text-subtitle2"},[e._v(e._s(e.file))]),n("q-tree",{attrs:{nodes:e.instanceTree,"node-key":"id","selected-color":"primary",selected:e.instanceID,"default-expand-all":""},on:{"update:selected":function(t){e.instanceID=t}}})],1),n("div",{staticClass:"col-9 q-gutter-md"},[n("div",{staticClass:"row"},[n("q-radio",{attrs:{val:"all",label:"All"},model:{value:e.showWhichGates,callback:function(t){e.showWhichGates=t},expression:"showWhichGates"}}),n("q-radio",{attrs:{val:"outputs",label:"Outputs"},model:{value:e.showWhichGates,callback:function(t){e.showWhichGates=t},expression:"showWhichGates"}})],1),n("q-scroll-area",{staticStyle:{height:"70vh"}},[n("div",{staticClass:"row q-pa-md"},[n("q-markup-table",{staticClass:"full-width"},[n("thead",{staticClass:"bg-teal"},[n("tr",{staticClass:"text-white"},[n("th",{staticClass:"text-left"},[e._v("GlobalID")]),n("th",{staticClass:"text-left"},[e._v("Function")]),n("th",{staticClass:"text-left"},[e._v("Inputs")]),n("th",{staticClass:"text-right"},[e._v("State")])])]),n("tbody",e._l(e.selectedGates,(function(t){return n("tr",{key:t.globalid},[n("td",[e._v(e._s(t.globalid))]),n("td",[e._v(e._s(e.getGate(t.globalid).logic))]),n("td",[e._v(e._s(e.getGate(t.globalid).inputs.join(", ")))]),n("td",{staticClass:"text-right"},[e._v(e._s(e.getGate(t.globalid).state))])])})),0)])],1)])],1)])])},Q=[],$=(n("1c16"),{props:["gates","instances","file"],mixins:[N],data(){return{showWhichGates:"all"}}}),K=$,X=n("2bb1"),H=Object(l["a"])(K,W,Q,!1,null,null,null),V=H.exports;C()(H,"components",{QTree:D["a"],QRadio:O["a"],QScrollArea:G["a"],QMarkupTable:X["a"]});var U,Y,Z,J=n("149f");n("07ac");const ee=(e,t)=>{""!==e&&(e+=".");const n=U[t.module],a=t.params.reduce((a,r)=>(a[r.param]={globalid:e+r.mapped.id,type:"port",moduleid:r.param,instanceid:e+t.id+"."+r.param,porttype:n.ports.find(e=>e.id==r.param).type},a),{}),r=n=>(a[n]={globalid:e+t.id+"."+n,instanceid:e+t.id+"."+n,moduleid:n,type:"wire"},a[n].globalid);n.wires.forEach(r);const s=n=>(Z.push({id:a[n.id].instanceid,logic:n.gate,inputs:n.params.map(e=>a[e].globalid),instance:e+t.id,state:0}),a[n.id].moduleid);n.statements.filter(e=>"gate"==e.type).forEach(s);const i=(e,t)=>{let n;if("BRACKETED_EXPRESSION"==e.type||"ASSIGN_EXPRESSION"==e.type){let o=e.value;for(let e=1;e<o.length;e+=2){let c=e==o.length-2?t:t+"op"+e;a[c]||r(c),n=s({id:c,gate:o[e].value,params:[1==e?i(o[e-1],t+"op"+(e-1)):n,i(o[e+1],t+"op"+(e+1))]})}return n}if("VARIABLE"==e.type){if(n=e.value,e.invert){if(!a["not"+n]){r("not"+n);s({id:"not"+n,gate:"not",params:[n]})}return"not"+n}return n}throw new Error("vlgWalker shouldn't be here. Node is not VARIABLE or EXPRESSION")};n.statements.filter(e=>"assign"==e.type).forEach(e=>i(e.value,e.id));var o={id:e+t.id,inputs:Object.values(a).filter(e=>"port"==e.type&&"input"==e.porttype),outputs:Object.values(a).filter(e=>"port"==e.type&&"output"==e.porttype),wires:Object.values(a).filter(e=>"wire"==e.type),instances:[]};return n.statements.filter(e=>"instance"==e.type).forEach(n=>{var a=ee(e+t.id,n);a.outputs.forEach(e=>{Z.find(t=>t.id==e.globalid).inputs.push(e.instanceid)}),o.instances.push(a.id)}),Y.push(o),o},te=e=>{U=e.reduce((e,t)=>"module"==!t.type?(console.log("top level of ast should be modules only"),e):(e[t.id]=t,e),{}),Z=[],Y=[];const t={params:U.main.ports.map(e=>({param:e.id,mapped:{id:"main."+e.id}})),id:"main",module:"main"};return ee("",t),{instances:Y,gates:Z}};var ne=te,ae=(n("abb2"),n("fcf3")),re=n("47d0"),se="// One bit full adder\r\n\r\nmodule SingleStage (\r\n  input a,\r\n  input b,\r\n  input cin,\r\n  output s,\r\n  output cout );\r\n\r\n  wire w1, w2, w3;\r\n\r\n  and( w1, a, b );\r\n  and( w2, a, cin );\r\n  and( w3, b, cin );\r\n  or( cout, w1, w2, w3 );\r\n\r\n  xor( s, a, b, cin );\r\n\r\nendmodule\r\n\r\nmodule main(\r\n  output sum,\r\n  output cout);\r\n\r\n  wire a, b, cin;\r\n\r\n  control(a);\r\n  control(b);\r\n  control(cin);\r\n\r\n  SingleStage uut(\r\n\t\t.a(a),\r\n\t\t.b(b),\r\n\t\t.cin(cin),\r\n\t\t.s(sum),\r\n\t\t.cout(cout)\r\n  );\r\n\r\n  buffer(sum);\r\n  buffer(cout);\r\n\r\n\ttest begin\r\n\t\t#0  {a=0, b=0, cin=0};\r\n    #2  {a=0, b=0, cin=0};\r\n    #4  {a=0, b=0, cin=1};\r\n    #6  {a=0, b=1, cin=0};\r\n    #8  {a=0, b=1, cin=1};\r\n    #10 {a=1, b=0, cin=0};\r\n    #12 {a=1, b=0, cin=1};\r\n    #14 {a=1, b=1, cin=0};\r\n    #16 {a=1, b=1, cin=1};\r\n\tend\r\nendmodule",ie="// D Flip Flop\r\n\r\nmodule DFF (\r\n\tinput clk,\r\n\tinput dIn,\r\n\toutput q);\r\n\r\n\twire not_d_in, d_nand_a, d_nand_c, q_;\r\n\r\n\tnot( not_d_in, dIn );\r\n\tnand( d_nand_a, dIn, clk );\r\n\tnand( q, d_nand_a, q_ );\r\n\tnand( d_nand_c, not_d_in, clk );\r\n  nand( q_, d_nand_c, q);\r\nendmodule\r\n\r\nmodule DFFE (\r\n  input clk,\r\n  input dIn,\r\n  input dEnable,\r\n  output q);\r\n\r\n  wire gatedClk, dInB;\r\n  and( gatedClk, clk, dEnable );\r\n  buffer( dInB, dIn) ;\r\n\r\n  DFF dff( .clk(gatedClk), .dIn(dInB), .q(q));\r\n\r\n  buffer(q);\r\nendmodule\r\n\r\nmodule main(output q);\r\n\r\n  wire A, E, clock;\r\n\r\n  control(A);\r\n  control(E);\r\n  control(clock);\r\n\r\n  DFFE dffe(.clk(clock), .dIn(A), .dEnable(E), .q(q));\r\n\r\n  buffer(q);\r\n\r\n  test begin\r\n    #0  { E=1 };\r\n    #1  { A=1, E=0 };\r\n    #7  { E=1 };\r\n    #9  { A=0, E=0 };\r\n    #12;\r\n  end\r\nendmodule",oe="// template to show basic syntax\r\n\r\nmodule MyModule (\r\n  input a, b,\r\n  output X, Y );\r\n\r\n  // gate format: logicFn(id, input1, input2)\r\n  and( X, a, b );\r\n  or(  Y, a, b );\r\n\r\n  // alternative bitwise format\r\n  // assign X = a & b;\r\nendmodule\r\n\r\nmodule main(\r\n  output o1, o2);\r\n\r\n  // wires act as local variables/gates\r\n  wire user1, user2, cin;\r\n\r\n  // control is an external button/sensor\r\n  // control state is set in the testbench\r\n  control(user1);\r\n  control(user2);\r\n\r\n  // declare foo as an instance (copy) of MyModule\r\n  // map the input/output parameters of MyModule to the calling namespace\r\n  // .moduleParameter(callingNamespaceVariable)\r\n  MyModule foo(\r\n\t\t.a(user1),\r\n\t\t.b(user2),\r\n\t\t.x(o1),\r\n\t\t.y(o2)\r\n  );\r\n\r\n  // foo needs something to wire it's outputs to in main\r\n  buffer(o1);\r\n  buffer(o2);\r\n\r\n  // main module should have a testbench to set control states\r\n  // format: #time {controlVar=val,...}\r\n  test begin\r\n    #0  {user1=0, user2=0};\r\n    #2  {user1=0, user2=1};\r\n    #4  {user1=1, user2=0};\r\n    #6  {user1=1, user2=1};\r\n  end\r\nendmodule",ce="/* 2 to 4 one hot decoder\r\na b | F3 F2 F1 F0\r\n0 0 |  0  0  0  1 \r\n0 1 |  0  0  1  0\r\n1 0 |  0  1  0  0\r\n1 1 |  1  0  0  0\r\n*/\r\n\r\n// using bitwise assigns\r\nmodule OneHotDecoderBitwise (\r\n  input a, b,\r\n  output F3, F2, F1, F0);\r\n\r\n  assign F0 = ~a & ~b;\r\n  assign F1 = ~a & b;\r\n  assign F2 = a & ~b;\r\n  assign F3 = a & b;\r\nendmodule\r\n\r\n// using standard gate statements\r\nmodule OneHotDecoder (\r\n  input a, b,\r\n  output F3, F2, F1, F0);\r\n\r\n  wire nota, notb;\r\n  not(nota, a);\r\n  not(notb, b);\r\n\r\n  and(F0, nota, notb);\r\n  and(F1, nota, b);\r\n  and(F2, a, notb);\r\n  and(F3, a, b);\r\nendmodule\r\n\r\nmodule main(\r\n  output F3, F2, F1, F0);\r\n\r\n  wire a, b;\r\n  control(a);\r\n  control(b);\r\n\r\n  // OneHotDecoder ohd(\r\n  OneHotDecoderBitwise ohd(\r\n\t\t.a(a),\r\n\t\t.b(b),\r\n\t\t.F3(F3),\r\n\t\t.F2(F2),\r\n\t\t.F1(F1),\r\n\t\t.F0(F0)\r\n  );\r\n\r\n  buffer(F3);\r\n  buffer(F2);\r\n  buffer(F1);\r\n  buffer(F0);\r\n\r\n  test begin\r\n\t\t#0  {a=0, b=0};\r\n    #2  {a=0, b=1};\r\n    #4  {a=1, b=0};\r\n    #6  {a=1, b=1};\r\n    #8;\r\n\tend\r\nendmodule",le="/* 7 segment display decoder\r\n  a\r\nf   b\r\n  g\r\ne   c\r\n  d\r\n\r\nA B C | Fa Fb Fc Fd Fe Ff Fg\r\n0 0 0 |  1  1  1  1  1  1  0 \r\n0 0 1 |  0  1  1  0  0  0  0\r\n0 1 0 |  1  1  0  1  1  0  1\r\n0 1 1 |  1  1  1  1  0  0  1\r\n1 0 0 |  0  1  1  0  0  1  1 \r\n1 0 1 |  1  0  1  1  0  1  1\r\n1 1 0 |  1  0  1  1  1  1  1\r\n1 1 1 |  1  1  1  0  0  0  0\r\n*/\r\n\r\n// using standard gate statements\r\nmodule SevenSeg(\r\n  input A, B, C,\r\n  output Fa, Fb, Fc, Fd, Fe, Ff, Fg);\r\n\r\n  assign Fa = (~A & ~C) | B        | (A & C);\r\n  assign Fb = (~B & ~C) | ~A       | (B & C);\r\n  assign Fc = A         | ~B       | C;\r\n  assign Fd = (~A & ~C) | (~A & B) | (B & ~C) | (A & ~B & C);\r\n  assign Fe = (~A & ~C) | (B & ~C);\r\n  assign Ff = (~B & ~C) | (A & ~C) | (A & ~B);\r\n  assign Fg = (~A & B)  | (A & ~C) | (A & ~B);\r\nendmodule\r\n\r\nmodule main(\r\n  output Fa, Fb, Fc, Fd, Fe, Ff, Fg);\r\n\r\n  wire a, b, c;\r\n\r\n  control(a);\r\n  control(b);\r\n  control(c);\r\n\r\n  SevenSeg ss(\r\n\t\t.A(a),\r\n\t\t.B(b),\r\n\t\t.C(c),\r\n    .Fa(Fa),\r\n    .Fb(Fb),\r\n    .Fc(Fc),\r\n    .Fd(Fd),\r\n    .Fe(Fe),\r\n    .Ff(Ff),\r\n    .Fg(Fg)\r\n  );\r\n\r\n  buffer(Fa);\r\n  buffer(Fb);\r\n  buffer(Fc);\r\n  buffer(Fd);\r\n  buffer(Fe);\r\n  buffer(Ff);\r\n  buffer(Fg);\r\n\r\n  test begin\r\n    #00 {a=0, b=0, c=0}; // should get 1 1 1 1 1 1 0\r\n    #02 {a=0, b=0, c=1}; // should get 0 1 1 0 0 0 0\r\n    #04 {a=0, b=1, c=0}; // should get 1 1 0 1 1 0 1\r\n    #06 {a=0, b=1, c=1}; // should get 1 1 1 1 0 0 1\r\n    #08 {a=1, b=0, c=0}; // should get 0 1 1 0 0 1 1 \r\n    #10 {a=1, b=0, c=1}; // should get 1 0 1 1 0 1 1\r\n    #12 {a=1, b=1, c=0}; // should get 1 0 1 1 1 1 1\r\n    #14 {a=1, b=1, c=1}; // should get 1 1 1 0 0 0 0\r\n    #16;\r\n\tend\r\nendmodule",de="/* 2 to 1 Multiplexer\r\nSel selects which input to pass to output\r\nsel a b | F\r\n 0  0 0 | 0 \r\n 0  0 1 | 0 \r\n 0  1 0 | 1 \r\n 0  1 1 | 1 \r\n----------- \r\n 1  0 0 | 0\r\n 1  0 1 | 1\r\n 1  1 0 | 0\r\n 1  1 1 | 1\r\n */\r\n\r\nmodule Mux2_1 (\r\n\tinput sel,\r\n\tinput a, b,\r\n\toutput F);\r\n\r\n\tassign F = (~sel & a) | (sel & b);\r\nendmodule\r\n\r\nmodule main(output F);\r\n  wire a, b, sel;\r\n\r\n  control(a);\r\n  control(b);\r\n  control(sel);\r\n\r\n  Mux2_1 mux(.a(a), .b(b), .sel(sel), .F(F));\r\n  buffer(F);\r\n\r\n  test begin\r\n    #01 {sel=0, a=0, b=0}; // expect 0 \r\n    #02 {sel=0, a=0, b=1}; // expect 0 \r\n    #03 {sel=0, a=1, b=0}; // expect 1 \r\n    #04 {sel=0, a=1, b=1}; // expect 1 \r\n    #05 {sel=1, a=0, b=0}; // expect 0\r\n    #06 {sel=1, a=0, b=1}; // expect 1\r\n    #07 {sel=1, a=1, b=0}; // expect 0\r\n    #08 {sel=1, a=1, b=1}; // expect 1\r\n    #09;\r\n  end\r\nendmodule",ue=n("2b0e");const be=n("53f4");let pe={enabled:!0,level:2};const me=new be.Instance(pe),fe=e=>{const t=e.join(", ");return t.length<21?t:t.slice(0,40)+"..."},he=(e,t)=>e.reduce((e,n)=>(e[n[t]]=n,e),{}),ge=e=>1&~e,je={not:e=>1&~e,buffer:e=>e,and2:(e,t)=>e&&t,nand2:(e,t)=>ge(e&&t),or2:(e,t)=>e||t,nor2:(e,t)=>ge(e||t),xor2:(e,t)=>e^t,xnor2:(e,t)=>ge(e^t),and3:(e,t,n)=>e&&t&&n,nand3:(e,t,n)=>ge(e&&t&&n),or3:(e,t,n)=>e||t||n,nor3:(e,t,n)=>ge(e||t||n),xor3:(e,t,n)=>e^t^n,xnor3:(e,t,n)=>ge(e^t^n)},ye=(e,t)=>{const n=e=>{let n=e.logic;if(1==e.inputs.length){if("not"!=n&&"buffer"!=n)return void console.log("Gate evaluation error - 1 input only valid for not and buffer gates");const a=t[e.inputs[0]];if(!a)throw console.log(e.inputs[0]),new Error("component not found");return void(e.state="x"===a?"x":je[n](a.state))}const a=t[e.inputs[0]],r=t[e.inputs[1]];if(2!=e.inputs.length)if(3!=e.inputs.length);else{const s=t[e.inputs[2]];e.state="x"===a||"x"===r||"x"===s?"x":je[n+"3"](a.state,r.state,s.state)}else e.state="x"===a||"x"===r?"x":je[n+"2"](a.state,r.state)};e.forEach(e=>{if("control"!==e.logic)return n(e)})};var ve={name:"PageIndex",components:{Editor:u,Graph:_,Gates:V,Trace:z},data(){return{terminal:{},showTerminal:!0,fitAddon:{},compiled:{state:"uncompiled",sourceFile:"",parseTree:{lint:[]},gates:[],instances:[],simulation:{}},tab:"code",layout:"dagre",source:{BitAdder:se,DFF:ie,Scratch:oe,OneHotDecoder:ce,SevenSeg:le,Mux2_1:de},sourceTab:"Mux2_1",openFiles:["Scratch","OneHotDecoder","SevenSeg","Mux2_1"],errors:{}}},computed:{allFiles:function(){return Object.keys(this.source)},compileIcon:function(){return"success"==this.compiled.state?"check_circle":"error"==this.compiled.state?"error_outline":"replay"}},methods:{closeFile:function(){var e=this.openFiles.findIndex(e=>e==this.sourceTab);this.openFiles.splice(e,1),this.sourceTab=this.openFiles[e%this.openFiles.length]},sourceErrors:function(e){return this.errors[e]},onParsed(e,t){ue["a"].set(this.errors,e,t)},onOpenFile(e){this.openFiles.some(t=>t==e)||this.openFiles.push(e),this.sourceTab=e},termWriteln(e){this.terminal.write(e+"\n\r"),this.terminal.scrollToBottom()},compile(){this.showTerminal=!0,this.compiled.sourceFile=this.sourceTab,this.termWriteln(me.bold.green("• Compiling: ")+me.yellow(this.sourceTab));const e=Object(J["a"])(this.source[this.sourceTab]).parseState;if(console.log("Parse: ",e),e.isError)return this.compiled.state="error",void this.termWriteln(me.red("└── Parser error: ")+e.error);this.compiled.state="success",this.compiled.parseTree=e.result,this.termWriteln(me.green(`├── Parsed ${this.compiled.parseTree.length} modules: ${me.white(this.compiled.parseTree.map(e=>e.id).join(", "))}`));const t=ne(this.compiled.parseTree);console.log("Walk: ",t),this.compiled.instances=[...t.instances],this.compiled.gates=[...t.gates],this.termWriteln(me.green(`├── Generated ${this.compiled.instances.length} instances: ${me.white(fe(this.compiled.instances.map(e=>e.id)))}`)),this.termWriteln(me.green(`└── Generated ${this.compiled.gates.length} gates: ${me.white(fe(this.compiled.gates.map(e=>e.id)))}`)),this.termWriteln(me.green.inverse(" DONE ")+"  Compiled successfully")},simulate(){this.showTerminal=!0,this.termWriteln(me.bold.cyan("• Simulating: ")+me.yellow(this.compiled.sourceFile));const e=5;this.compiled.simulation={},this.compiled.gates.forEach(e=>{this.compiled.simulation[e.id]=[]});var t=he(this.compiled.gates,"id"),n=he(this.compiled.instances,"id"),a=he(this.compiled.parseTree,"id");const r=a.main.clock.reduce((e,t)=>Math.max(t.time,e),0);this.compiled.simulation.time=[],t["main.clock"]&&(t["main.clock"].state=0);for(let s=0;s<=r;s++){this.compiled.simulation.time.push(s),a.main.clock.forEach(e=>{e.time==s&&e.assignments.forEach(e=>{"control"==t["main."+e.id].logic&&(t["main."+e.id].state=e.value)})}),t["main.clock"]&&(t["main.clock"].state=1&~t["main.clock"].state);for(let n=0;n<e;n++)ye(this.compiled.gates,t);this.compiled.gates.forEach(e=>{this.compiled.simulation[e.id].push(t[e.id].state)}),a.main.clock.forEach((e,a,r)=>{if(e.time!=s)return;const i=a==r.length-1?"└":"├";this.termWriteln(me.cyan(`${i}── Time ${s.toString().padStart(3,"0")} :`)+fe(e.assignments.map(e=>e.id+"="+e.value))+me.cyan(" => ")+fe(n.main.outputs.map(e=>e.moduleid+"="+t[e.globalid].state)))})}this.termWriteln(me.cyan.inverse(" DONE ")+"  Simulated successfully")}},mounted(){this.terminal=new ae["Terminal"]({rows:40}),this.fitAddon=new re["FitAddon"],this.terminal.loadAddon(this.fitAddon),this.terminal.open(document.getElementById("terminal")),this.fitAddon.fit()}},Oe=ve,we=(n("8041"),n("9989")),Ee=n("429b"),ke=n("7460"),xe=n("adad"),Ce=n("823b"),Fe=n("65c6"),_e=n("2c91"),Te=n("58a81"),Ae=n("0016"),qe=n("f20b"),Ie=n("1c1c"),Se=n("66e5"),Re=n("4074"),Pe=n("0170"),Ne=n("7f67"),Be=Object(l["a"])(Oe,a,r,!1,null,null,null);t["default"]=Be.exports;C()(Be,"components",{QPage:we["a"],QTabs:Ee["a"],QTab:ke["a"],QTabPanels:xe["a"],QTabPanel:Ce["a"],QCard:j["a"],QToolbar:Fe["a"],QSpace:_e["a"],QBadge:Te["a"],QIcon:Ae["a"],QBtnDropdown:qe["a"],QList:Ie["a"],QItem:Se["a"],QItemSection:Re["a"],QItemLabel:Pe["a"],QBtn:v["a"],QSeparator:k["a"],QCardSection:y["a"]}),C()(Be,"directives",{ClosePopup:Ne["a"]})},"9aff":function(e,t,n){"use strict";n("c975"),n("fb6a"),n("4e82");var a=n("56b3"),r=n.n(a);n("149f"),n("5068");String.prototype.regexIndexOf=function(e,t){var n=this.substring(t||0).search(e);return n>=0?n+(t||0):n},r.a.defineSimpleMode("vlg",{meta:{lineComment:"//"},start:[{regex:/"(?:[^\\]|\\.)*?(?:"|$)/,token:"string"},{regex:/(?:module|begin)/,token:"def",indent:!0},{regex:/(?:input|output|endmodule|end)\b/,token:"def"},{regex:/(?:not|and|or|xor|nand|control|buffer)\b/,token:"keyword"},{regex:/(?:wire|test|assign)\b/,token:"variable-2"},{regex:/true|false|null|undefined/,token:"atom"},{regex:/0x[a-f\d]+|[-+]?(?:\.\d+|\d+\.?\d*)(?:e[-+]?\d+)?/i,token:"number"},{regex:/\/\/.*/,token:"comment"},{regex:/\/(?:[^\\]|\\.)*?\//,token:"variable-3"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/[-+\/*=<>!]+/,token:"operator"},{regex:/[\{\[\(]/,indent:!0},{regex:/[\}\]\)]/,dedent:!0},{regex:/[a-zA-Z$][\w$]*/,token:"variable"}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}]}),r.a.registerHelper("fold","vlg",(function(e,t){function n(e,t){var n=t&&t.match(/^(begin|module)+/);return n}var a=e.getLine(t.line),s=n(t.line,a);if(s){var i=e.lastLine(),o=t.line,c=e.getLine(o+1);while(o<i){if(n(o+1,c))break;++o,c=e.getLine(o+1)}return{from:r.a.Pos(t.line,a.length),to:r.a.Pos(o,e.getLine(o).length)}}}));var s={start:["nand(","and(","or(","xor(","nor(","not(","control","input","output","wire","assign"],none:["module"]};r.a.registerHelper("hint","dictionaryHint",(function(e){var t=e.getCursor(),n=e.getLine(t.line),a=t.ch,i=a,o=e.getTokenAt(e.getCursor()).state;while(i<n.length&&/[\w$]/.test(n.charAt(i)))++i;while(a&&/[\w$]/.test(n.charAt(a-1)))--a;var c=a!==i&&n.slice(a,i),l=new RegExp("^"+c,"i");return{list:(c?s[o.state].filter((function(e){return e.match(l)})):s[o.state]).sort(),from:r.a.Pos(t.line,a),to:r.a.Pos(t.line,i)}})),r.a.commands.autocomplete=function(e){r.a.showHint(e,r.a.hint.dictionaryHint)},r.a.commands.snippet=function(e){r.a.showHint(e,o)};const i=[{text:"module Name (\n   input A,B,C,\n   output X,Y);\n   // statements here\nendmodule",displayText:"module definition"},{text:"ModuleName instanceName(\n  .p1(m1), // .instanceParamater(LocalVar)\n  .p2(m2),\n  .p3(m3)\n);",displayText:"instance declaration"},{text:"and(gateID, input1, input2);",displayText:"gate declaration"},{text:"assign ID = (A & B);",displayText:"assign declaration"}];function o(e){const t=e.getCursor(),n=e.getTokenAt(t),a=n.start,s=t.ch,o=t.line,c=n.string,l=i.filter((function(e){return e.text.indexOf(c)>=0}));return{list:l.length?l:i,from:r.a.Pos(o,a),to:r.a.Pos(o,s)}}},a12c:function(e,t,n){},a796:function(e,t,n){"use strict";var a=n("1f8d"),r=n.n(a);r.a},bad6:function(e,t,n){"use strict";(function(e){var a=n("8f94"),r=n("56b3"),s=n.n(r),i=(n("76ae"),n("10b2"),n("8c33"),n("8822"),n("0dd0"),n("9b74"),n("f6b6"),n("7289"),n("4895"),n("cbc8"),n("697e"),n("149f"));n("9aff"),n("a7be"),n("7a7a");e.CodeMirror=s.a;var o=n("5068");t["a"]={components:{codemirror:a["codemirror"]},props:["value"],data(){return{parser:i["a"],cmOptions:{viewportMargin:1/0,tabSize:2,indentUnit:2,mode:"vlg",theme:"monokai",lineNumbers:!0,line:!0,extraKeys:{"Ctrl-Space":"autocomplete","Shift-Ctrl-Space":"snippet","Ctrl-/":"toggleComment","Ctrl-Q":function(e){e.foldCode(e.getCursor())}},lint:{selfContain:!0,getAnnotations:this.vlgValidator},autoCloseBrackets:!0,matchBrackets:!0,gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"],foldGutter:!0}}},methods:{vlgValidator:function(e,t,n){if(0==e.length)return[];var a=[];const r=this.parser(e);var i=o(e,{origin:0});const c=(t,n,r)=>{var o=i.fromIndex(n),c=i.fromIndex(Math.max(e.regexIndexOf(/[\s\(\)\[\]\{\},=]/,n),n));a.push({message:t,severity:r,from:s.a.Pos(o.line,o.col),to:s.a.Pos(c.line,c.col)})};return r.lint.forEach(e=>c(e.error,e.index,e.severity)),r.parseState.isError&&0==r.lint.length&&c(r.parseState.error,r.parseState.index),this.$emit("parsed",a),a},onReady(e){},onChange(e){this.$emit("input",e)}},computed:{codemirror(){return this.$refs.cmEditor.codemirror}},mounted(){}}}).call(this,n("c8ba"))},cb9a:function(e,t,n){},eb33:function(e,t,n){"use strict";var a=n("a12c"),r=n.n(a);r.a}}]);